{% extends 'base.html.twig' %}

{% block stylesheets %}

    <link href="/css/technic_presentation_page.css" rel="stylesheet">

    <link href="/css/technic_wysiwyg.css" rel="stylesheet">


{% endblock %}

{% block name %}Ajouter une M√©thode{% endblock %}

{% block body %}



    {% set isAdmin = false %}
    {% if is_granted('ROLE_ADMIN') %} {% set isAdmin = true %} {% endif %}

    {% set isCreator = false %}
    {% if technic.getCreator == app.user %} {% set isCreator = true %} {% endif %}


    

    <div class=" {{isCreator or isAdmin ? 'in-edition-mode'}} tp-container page-container container col-lg-11 col-xxl-9 px-0 pb-5">

        <div class="row mb-5">

            {# Technic Thumbnail if provided #}

            {% if technic.logo %}

                <div class="col-4 col-md-3 col-lg-2">

                    <img class="thumbnail rounded img-fluid" src="{{ vich_uploader_asset(technic) }}" alt="Technic Thumbnail">
                
                </div>
            
            {% endif %}

            {# Technic Name #}

            <div class="col-8 col-md-9 col-lg-10 ps-1 ps-md-3 d-flex align-items-center">

                <h2 class="fw-bold">{{technic.name[:1] | upper ~ technic.name[1:]}}</h2>

                {% if isCreator or isAdmin %}

                    <a href="{{ path( 'update_technic', {'id': technic.id} ) }}" class="pp-edition-mode ms-3">Modifier</a>
                
                {% endif %}

            </div>
        
        </div>

        {% include "technic/_show/slideshow_text_description.html.twig" %}

        {% include "technic/_show/pros_cons.html.twig" %}

        {% include "technic/_show/notes_sources.html.twig" %}


        {# Progress Bar #}


        {% if technic.progressBar is not empty %}
            
            <div class="row p-0 mb-4">

                <div class="col-md-6">

                    <h4 class="p-0 mb-4">üå≥ Potentiel de d√©carbonation</h4>

                    <div class="progress col-md-8 p-0">
                        <div class="progress-bar" role="progressbar" style="width: {{technic.progressBar}}%" aria-valuenow="{{technic.progressBar}}" aria-valuemin="0" aria-valuemax="100">{{technic.progressBar}}%</div>
                    </div>


                    <style>

                        @media screen and (min-width: 820px) {

                            .progress{
                                height:23px;
                            } 

                        }
                    
                    </style>

                </div>

            </div>
        
        {% endif %}





        {% if isCreator or isAdmin %}
            
            {# Switch Between Edition Mode and Consultation Mode Button #}

            <button id="pp-switch-edit-consult-mode" class="edition-mode" title="Switch between edition mode and consultation mode">

                <img id="pp-consult-icon" class="pp-edition-mode" src="{{ asset('eye.svg', 'pp_wysiwyg')}}" height="30" width="30"  alt="eye icon">

                <img id="pp-edit-icon" class="pp-consultation-mode" src="{{ asset('pen.svg', 'pp_wysiwyg')}}" height="30" width="30"  alt="pen icon">

            </button>
        
        {% endif %}

        

        <div class="pp-edition-mode">
        
            {% if isCreator or isAdmin %}

                {% include "technic/_show/wysiwyg.html.twig" %}
                
                <div class="my-5">

                    <a href="{{ path( 'update_technic', {'id': technic.id} ) }}"><button type="button" class="btn btn-lg btn-light">‚úèÔ∏è Modifier</button></a>
            
                </div>
                
            {% endif %}        

            {% if isAdmin %}

                <div class="my-5">

                    <h4 class="mb-3">üîë Actions Admin</h4>

                    <div class="border border-primary rounded mb-4 p-3">

                        {{ form_start(technicLogoForm) }}

                        {{form_widget(technicLogoForm)}}

                        <button type="submit" class="btn btn-validate mb-2 me-3">Envoyer</button>

                        {{ form_end(technicLogoForm) }}

                    </div>

                    <div class="border border-primary rounded my-4 p-3">

                        {{ form_start(technicValidationForm) }}

                            {{form_widget(technicValidationForm)}}

                            <button type="submit" class="btn btn-validate mb-2 me-3">Envoyer</button>

                        {{ form_end(technicValidationForm) }}

                    </div>
                    
                </div>


                {# Forms inclusions #}

                {% include "project_presentation/edit/slides/add_image_form.html.twig" with {'form': addImageForm} %}

                {% include "project_presentation/edit/slides/add_video_form.html.twig" with {'form': addVideoForm} %}


            {% endif %}    

        </div>
      

    </div>


{% endblock %}
